import{l as L,q as $,b as a,h as o,j as d,d as n,v as e,n as u,ax as k,F as c,i as m,ay as h,f as y,z as j,av as V,o as r,t as p}from"./app-pebjqkCD.js";import{u as B}from"./reserves-B7Ti7RoC.js";import{u as N}from"./users-BKl8x4eE.js";import{u as P}from"./trips-BVbkd_tG.js";import{u as I}from"./vehicles-hQAbVoZ-.js";import"./index.esm-C_1aiQ0x.js";import"./yup-locales.esm-DRsOkZ6u.js";const z={class:"surface-ground px-4 py-5 md:px-6 lg:px-8"},A={class:"grid"},K={class:"col-12 md:col-8 md:col-offset-2 lg:col-6 lg:col-offset-3"},q={class:"surface-card p-4 shadow-2 rounded-4"},G={key:0},M={class:"mb-4"},H={key:0,class:"p-error block mt-1"},J={class:"mb-4"},O={key:0,class:"p-error block mt-1"},Q={class:"mb-4"},W={class:"p-inputgroup"},X={key:0,class:"p-error block mt-1"},Y={class:"mb-4"},Z={key:0,class:"p-error block mt-1"},ee={class:"mb-4"},se={key:0,class:"p-error block mt-1"},te={class:"mb-4"},le={class:"p-inputgroup"},oe={key:0,class:"p-error block mt-1"},ae={class:"flex justify-content-end"},ve={__name:"Create",setup(re){const _=j(),{reserveSchema:x,reserve:i,createReserve:w,validationErrors:l}=B(),{getTrips:U,tripsList:g}=P(),{getUsers:C,users:F}=N(),{getVehicle:R,vehicle:S}=I(),f=L(null),T=async v=>{await R(v),f.value=S.value.pax_number};$(async()=>{await C(),await U()});const E=async()=>{try{await x.validate(i.value,{abortEarly:!1}).then(()=>{w(i)}),_.back()}catch(v){v.inner&&(l.value={},v.inner.forEach(s=>{l.value[s.path]||(l.value[s.path]=[]),l.value[s.path].push(s.message)}))}};return(v,s)=>{const b=y("DatePicker"),D=y("Toast");return r(),a(c,null,[o("div",z,[o("div",A,[o("div",K,[o("div",q,[s[13]||(s[13]=o("div",{class:"text-center mb-5"},[o("h2",{class:"text-3xl font-medium text-900 mb-3"},"Crear Reserva"),o("span",{class:"text-600 font-medium"},"Por favor, complete los datos del formulario")],-1)),e(i)?(r(),a("div",G,[o("div",M,[s[7]||(s[7]=o("label",{for:"reserve.user_id",class:"block text-900 font-medium mb-2"},"Usuario",-1)),d(e(k),{modelValue:e(i).user_id,"onUpdate:modelValue":s[0]||(s[0]=t=>e(i).user_id=t),options:e(F).data,filter:"",optionLabel:"name",optionValue:"id",dataKey:"id",placeholder:"Seleccionar Usuario",class:u(["w-full",{"p-invalid":e(l).user_id}])},null,8,["modelValue","options","class"]),e(l).user_id?(r(),a("small",H,[(r(!0),a(c,null,m(e(l).user_id,t=>(r(),a("div",{key:t},p(t),1))),128))])):n("",!0)]),o("div",J,[s[8]||(s[8]=o("label",{for:"reserve.trip_id",class:"block text-900 font-medium mb-2"},"Viaje",-1)),d(e(k),{modelValue:e(i).trip_id,"onUpdate:modelValue":[s[1]||(s[1]=t=>e(i).trip_id=t),T],options:e(g),filter:"",optionLabel:t=>`${t.start_point.address} - ${t.end_point.address}`,optionValue:"id",dataKey:"id",placeholder:"Seleccionar Viaje",class:u(["w-full",{"p-invalid":e(l).trip_id}])},null,8,["modelValue","options","optionLabel","class"]),e(l).trip_id?(r(),a("small",O,[(r(!0),a(c,null,m(e(l).trip_id,t=>(r(),a("div",{key:t},p(t),1))),128))])):n("",!0)]),o("div",Q,[s[9]||(s[9]=o("label",{for:"seats_reserved",class:"block text-900 font-medium mb-2"},"Sitios Reservados",-1)),o("div",W,[d(e(h),{modelValue:e(i).seats_reserved,"onUpdate:modelValue":s[2]||(s[2]=t=>e(i).seats_reserved=t),id:"seats_reserved",min:0,max:f.value,placeholder:"NÃºmero de asientos",class:u(["w-full",{"p-invalid":e(l).seats_reserved}]),showButtons:""},null,8,["modelValue","max","class"])]),e(l).seats_reserved?(r(),a("small",X,[(r(!0),a(c,null,m(e(l).seats_reserved,t=>(r(),a("div",{key:t},p(t),1))),128))])):n("",!0)]),o("div",Y,[s[10]||(s[10]=o("label",{for:"reservation_date",class:"block text-900 font-medium mb-2"},"Fecha de Reserva",-1)),d(b,{modelValue:e(i).reservation_date,"onUpdate:modelValue":s[3]||(s[3]=t=>e(i).reservation_date=t),showTime:"",hourFormat:"24",class:u(["w-full",{"p-invalid":e(l).reservation_date}]),showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),e(l).reservation_date?(r(),a("small",Z,[(r(!0),a(c,null,m(e(l).reservation_date,t=>(r(),a("div",{key:t},p(t),1))),128))])):n("",!0)]),o("div",ee,[s[11]||(s[11]=o("label",{for:"check_in",class:"block text-900 font-medium mb-2"},"Check In",-1)),d(b,{modelValue:e(i).check_in,"onUpdate:modelValue":s[4]||(s[4]=t=>e(i).check_in=t),showTime:"",hourFormat:"24",class:u(["w-full",{"p-invalid":e(l).check_in}]),showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),e(l).check_in?(r(),a("small",se,[(r(!0),a(c,null,m(e(l).check_in,t=>(r(),a("div",{key:t},p(t),1))),128))])):n("",!0)]),o("div",te,[s[12]||(s[12]=o("label",{for:"total_price",class:"block text-900 font-medium mb-2"},"Precio Total",-1)),o("div",le,[d(e(h),{modelValue:e(i).total_price,"onUpdate:modelValue":s[5]||(s[5]=t=>e(i).total_price=t),id:"total_price",minFractionDigits:2,maxFractionDigits:2,placeholder:"0.00",class:u(["w-full",{"p-invalid":e(l).total_price}]),mode:"currency",currency:"EUR",locale:"es-ES"},null,8,["modelValue","class"])]),e(l).total_price?(r(),a("small",oe,[(r(!0),a(c,null,m(e(l).total_price,t=>(r(),a("div",{key:t},p(t),1))),128))])):n("",!0)]),o("div",ae,[d(e(V),{label:"Cancelar",class:"p-button-text mr-2",onClick:s[6]||(s[6]=t=>e(_).back())}),d(e(V),{label:"Guardar",icon:"pi pi-check",class:"p-button-success",onClick:E})])])):n("",!0)])])])]),d(D)],64)}}};export{ve as default};
