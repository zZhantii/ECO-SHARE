import{A as V,l as w,ac as m,q as F,p as M,b as A,h as d,j as t,w as a,f as o,o as c,e as f,d as b,v as k,y as $}from"./app-pebjqkCD.js";import{u as z}from"./reserves-B7Ti7RoC.js";import"./index.esm-C_1aiQ0x.js";import"./yup-locales.esm-DRsOkZ6u.js";const S={class:"grid"},U={class:"col-12"},D={class:"card"},G={__name:"index",setup(O){const{can:p}=V(),{getReserves:u,reserveList:_,deleteReserve:h}=z(),r=w({global:{value:null,matchMode:m.CONTAINS}}),C=()=>{r.value={global:{value:null,matchMode:m.CONTAINS}}};F(async()=>{await u()});const y=M(()=>_.value.flatMap(i=>i.reserves.map(e=>({user_id:e.pivot.user_id,trip_id:e.pivot.trip_id,seats_reserved:e.pivot.seats_reserved,reservation_date:e.pivot.reservation_date,check_in:e.pivot.check_in,total_price:e.pivot.total_price})))),T=async i=>{await h(i),v()},v=()=>{_.value=[],u()};return(i,e)=>{const g=o("InputIcon"),I=o("InputText"),R=o("IconField"),n=o("Button"),N=o("Toolbar"),l=o("Column"),x=o("router-link"),B=o("DataTable");return c(),A("div",S,[d("div",U,[d("div",D,[e[6]||(e[6]=d("div",{class:"card-header bg-transparent ps-0 pe-0"},[d("h5",{class:"float-start mb-0"},"Reservas")],-1)),t(B,{filters:r.value,"onUpdate:filters":e[4]||(e[4]=s=>r.value=s),value:y.value,paginator:"",rows:10,globalFilterFields:["user_id","trip_id","seats_reserved","reservation_date","check_in","total_price"],stripedRows:"",dataKey:"id",size:"small"},{header:a(()=>[t(N,{"pt:root:class":"toolbar-table"},{start:a(()=>[t(R,null,{default:a(()=>[t(g,{class:"pi pi-search"}),t(I,{modelValue:r.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.global.value=s),placeholder:"Buscar"},null,8,["modelValue"])]),_:1}),t(n,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"ml-1",outlined:"",onClick:e[1]||(e[1]=s=>C())}),t(n,{type:"button",icon:"pi pi-refresh",class:"h-100 ml-1",outlined:"",onClick:e[2]||(e[2]=s=>v())})]),end:a(()=>[t(n,{icon:"pi pi-external-link",label:"Crear Reserva",onClick:e[3]||(e[3]=s=>i.$router.push("reserves/create")),class:"float-end"})]),_:1})]),empty:a(()=>e[5]||(e[5]=[$(" No customers found. ")])),default:a(()=>[t(l,{field:"user_id",header:"User_id",sortable:""}),t(l,{field:"trip_id",header:"Trip_id",sortable:""}),t(l,{field:"seats_reserved",header:"Seats_reserved",sortable:""}),t(l,{field:"reservation_date",header:"Reservation_date",sortable:""}),t(l,{field:"check_in",header:"Check_in",sortable:""}),t(l,{field:"total_price",header:"Total_price",sortable:""}),t(l,{class:"pe-0 me-0 icon-column-2"},{body:a(s=>[k(p)("user-edit")?(c(),f(x,{key:0,to:{name:"reserves.edit",params:{user_id:s.data.user_id,trip_id:s.data.trip_id}}},{default:a(()=>[t(n,{icon:"pi pi-pencil",severity:"info",size:"small",class:"mr-1"})]),_:2},1032,["to"])):b("",!0),k(p)("user-delete")?(c(),f(n,{key:1,icon:"pi pi-trash",severity:"danger",onClick:j=>T(s.data),size:"small"},null,8,["onClick"])):b("",!0)]),_:1})]),_:1},8,["filters","value"])])])])}}};export{G as default};
