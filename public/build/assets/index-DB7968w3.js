import{A as B,l as w,ac as v,q as F,p as M,b as A,h as d,j as t,w as o,f as l,o as u,e as f,d as b,v as C,y as $}from"./app-pebjqkCD.js";import{u as z}from"./rates-Dmnqx1u6.js";import"./index.esm-C_1aiQ0x.js";import"./yup-locales.esm-DRsOkZ6u.js";const U={class:"grid"},q={class:"col-12"},D={class:"card"},G={__name:"index",setup(E){const{can:p}=B(),{getRates:c,rateList:m,deleteRate:k}=z(),s=w({global:{value:null,matchMode:v.CONTAINS}}),y=()=>{s.value={global:{value:null,matchMode:v.CONTAINS}}};F(()=>{c()});const g=M(()=>m.value.flatMap(n=>n.rates.map(e=>({user_id:e.pivot.user_id,trip_id:e.pivot.trip_id,rate:e.pivot.rate})))),h=async n=>{await k(n),await _()},_=()=>{m.value=[],c()};return(n,e)=>{const I=l("InputIcon"),T=l("InputText"),N=l("IconField"),i=l("Button"),R=l("Toolbar"),r=l("Column"),V=l("router-link"),x=l("DataTable");return u(),A("div",U,[d("div",q,[d("div",D,[e[6]||(e[6]=d("div",{class:"card-header bg-transparent ps-0 pe-0"},[d("h5",{class:"float-start mb-0"},"Etiquetas")],-1)),t(x,{filters:s.value,"onUpdate:filters":e[4]||(e[4]=a=>s.value=a),value:g.value,paginator:"",rows:10,globalFilterFields:["user_id","trip_id","rate"],stripedRows:"",dataKey:"id",size:"small"},{header:o(()=>[t(R,{"pt:root:class":"toolbar-table"},{start:o(()=>[t(N,null,{default:o(()=>[t(I,{class:"pi pi-search"}),t(T,{modelValue:s.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.global.value=a),placeholder:"Buscar"},null,8,["modelValue"])]),_:1}),t(i,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"ml-1",outlined:"",onClick:e[1]||(e[1]=a=>y())}),t(i,{type:"button",icon:"pi pi-refresh",class:"h-100 ml-1",outlined:"",onClick:e[2]||(e[2]=a=>_())})]),end:o(()=>[t(i,{icon:"pi pi-external-link",label:"Crear Vehiculo",onClick:e[3]||(e[3]=a=>n.$router.push("rates/create")),class:"float-end"})]),_:1})]),empty:o(()=>e[5]||(e[5]=[$(" No customers found. ")])),default:o(()=>[t(r,{field:"user_id",header:"User_id",sortable:""}),t(r,{field:"trip_id",header:"Trip_id",sortable:""}),t(r,{field:"rate",header:"Rate",sortable:""}),t(r,{class:"pe-0 me-0 icon-column-2"},{body:o(a=>[C(p)("user-edit")?(u(),f(V,{key:0,to:{name:"rates.edit",params:{user_id:a.data.user_id,trip_id:a.data.trip_id}}},{default:o(()=>[t(i,{icon:"pi pi-pencil",severity:"info",size:"small",class:"mr-1"})]),_:2},1032,["to"])):b("",!0),C(p)("user-delete")?(u(),f(i,{key:1,icon:"pi pi-trash",severity:"danger",onClick:O=>h(a.data),size:"small"},null,8,["onClick"])):b("",!0)]),_:1})]),_:1},8,["filters","value"])])])])}}};export{G as default};
