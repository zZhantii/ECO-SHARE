import{J as T,q as L,C as M,b as a,h as s,j as i,d as c,n as u,v as e,f as b,F as r,i as p,w as D,z as F,o as n,t as m}from"./app-pebjqkCD.js";import{s as j}from"./index.esm-C_1aiQ0x.js";import{e as z}from"./yup-locales.esm-DRsOkZ6u.js";import{u as q}from"./vehicles-hQAbVoZ-.js";import{u as R}from"./users-BKl8x4eE.js";const A={class:"surface-ground px-4 py-5 md:px-6 lg:px-8"},G={class:"grid"},J={class:"col-12 md:col-8 md:col-offset-2"},K={class:"surface-card p-4 shadow-2 rounded-4"},O={class:"grid"},$={class:"col-12 md:col-6 mb-4"},H={key:0,class:"p-error block mt-1"},Q={class:"col-12 md:col-6 mb-4"},W={key:0,class:"p-error block mt-1"},X={class:"col-12 md:col-6 mb-4"},Y={key:0,class:"p-error block mt-1"},Z={class:"col-12 md:col-6 mb-4"},P={key:0,class:"p-error block mt-1"},ll={class:"col-12 md:col-6 mb-4"},el={class:"p-inputgroup"},ol={key:0,class:"p-error block mt-1"},tl={class:"col-12 md:col-6 mb-4"},sl={key:0,class:"p-error block mt-1"},al={class:"col-12 md:col-6 mb-4"},nl={key:0,class:"p-error block mt-1"},dl={class:"col-12 md:col-6 mb-4"},il={key:0,class:"p-error block mt-1"},ul={class:"flex justify-content-end"},fl={__name:"Edit",setup(rl){j(z);const y=M(),_=F();T();const{updateVehicle:h,getVehicle:w,vehicle:d,validationErrors:t,vehicleSchema:U}=q(),{getUsers:g,users:C}=R(),B=["Gasolina","Diésel"],E=[{label:"No Validado",value:0},{label:"Validado",value:1}];L(async()=>{await w(y.params.id),await g()});const I=async()=>{try{await U.validate(d.value,{abortEarly:!1}).then(()=>{h(d)}),_.back()}catch(v){v.inner&&(t.value={},v.inner.forEach(o=>{t.value[o.path]||(t.value[o.path]=[]),t.value[o.path].push(o.message)}))}};return(v,o)=>{const N=b("Select"),f=b("InputText"),k=b("InputNumber"),V=b("SelectButton"),x=b("Button"),S=b("Toast");return n(),a(r,null,[s("div",A,[s("div",G,[s("div",J,[s("div",K,[o[17]||(o[17]=s("div",{class:"text-center mb-5"},[s("h2",{class:"text-3xl font-medium text-900 mb-3"},"Editar Vehículo"),s("span",{class:"text-600 font-medium"},"Modifique los datos del vehículo")],-1)),s("div",O,[s("div",$,[o[9]||(o[9]=s("label",{for:"user_id",class:"block text-900 font-medium mb-2"},"Usuario",-1)),i(N,{modelValue:e(d).user_id,"onUpdate:modelValue":o[0]||(o[0]=l=>e(d).user_id=l),options:e(C).data,filter:"",optionLabel:"name",optionValue:"id",dataKey:"id",class:u(["w-full",{"p-invalid":e(t).user_id}]),placeholder:"Seleccionar Usuario"},null,8,["modelValue","options","class"]),e(t).user_id?(n(),a("small",H,[(n(!0),a(r,null,p(e(t).user_id,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)]),s("div",Q,[o[10]||(o[10]=s("label",{for:"plate",class:"block text-900 font-medium mb-2"},"Matrícula",-1)),i(f,{modelValue:e(d).plate,"onUpdate:modelValue":o[1]||(o[1]=l=>e(d).plate=l),id:"plate",type:"text",class:u(["w-full",{"p-invalid":e(t).plate}]),placeholder:"Ingrese la matrícula"},null,8,["modelValue","class"]),e(t).plate?(n(),a("small",W,[(n(!0),a(r,null,p(e(t).plate,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)]),s("div",X,[o[11]||(o[11]=s("label",{for:"brand",class:"block text-900 font-medium mb-2"},"Marca",-1)),i(f,{modelValue:e(d).brand,"onUpdate:modelValue":o[2]||(o[2]=l=>e(d).brand=l),id:"brand",type:"text",class:u(["w-full",{"p-invalid":e(t).brand}]),placeholder:"Ingrese la marca"},null,8,["modelValue","class"]),e(t).brand?(n(),a("small",Y,[(n(!0),a(r,null,p(e(t).brand,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)]),s("div",Z,[o[12]||(o[12]=s("label",{for:"model",class:"block text-900 font-medium mb-2"},"Modelo",-1)),i(f,{modelValue:e(d).model,"onUpdate:modelValue":o[3]||(o[3]=l=>e(d).model=l),id:"model",type:"text",class:u(["w-full",{"p-invalid":e(t).model}]),placeholder:"Ingrese el modelo"},null,8,["modelValue","class"]),e(t).model?(n(),a("small",P,[(n(!0),a(r,null,p(e(t).model,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)]),s("div",ll,[o[13]||(o[13]=s("label",{for:"consumption",class:"block text-900 font-medium mb-2"},"Consumo",-1)),s("div",el,[i(k,{modelValue:e(d).consumption,"onUpdate:modelValue":o[4]||(o[4]=l=>e(d).consumption=l),id:"consumption",minFractionDigits:1,maxFractionDigits:1,showButtons:"",class:u(["w-full",{"p-invalid":e(t).consumption}]),placeholder:"L/100km"},null,8,["modelValue","class"])]),e(t).consumption?(n(),a("small",ol,[(n(!0),a(r,null,p(e(t).consumption,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)]),s("div",tl,[o[14]||(o[14]=s("label",{for:"pax_number",class:"block text-900 font-medium mb-2"},"Número de Pasajeros",-1)),i(k,{modelValue:e(d).pax_number,"onUpdate:modelValue":o[5]||(o[5]=l=>e(d).pax_number=l),id:"pax_number",min:1,showButtons:"",class:u(["w-full",{"p-invalid":e(t).pax_number}])},null,8,["modelValue","class"]),e(t).pax_number?(n(),a("small",sl,[(n(!0),a(r,null,p(e(t).pax_number,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)]),s("div",al,[o[15]||(o[15]=s("label",{for:"validation",class:"block text-900 font-medium mb-2"},"Estado de Validación",-1)),i(V,{modelValue:e(d).validation,"onUpdate:modelValue":o[6]||(o[6]=l=>e(d).validation=l),options:E,optionLabel:"label",optionValue:"value",class:u(["w-full",{"p-invalid":e(t).validation}])},{option:D(l=>[s("span",{class:u({"text-green-600":l.option.value===1,"text-red-600":l.option.value===0})},m(l.option.label),3)]),_:1},8,["modelValue","class"]),e(t).validation?(n(),a("small",nl,[(n(!0),a(r,null,p(e(t).validation,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)]),s("div",dl,[o[16]||(o[16]=s("label",{for:"fuel_type",class:"block text-900 font-medium mb-2"},"Tipo de Combustible",-1)),i(V,{modelValue:e(d).fuel_type,"onUpdate:modelValue":o[7]||(o[7]=l=>e(d).fuel_type=l),options:B,class:u(["w-full",{"p-invalid":e(t).fuel_type}])},null,8,["modelValue","class"]),e(t).fuel_type?(n(),a("small",il,[(n(!0),a(r,null,p(e(t).fuel_type,l=>(n(),a("div",{key:l},m(l),1))),128))])):c("",!0)])]),s("div",ul,[i(x,{label:"Cancelar",class:"p-button-text mr-2",onClick:o[8]||(o[8]=l=>e(_).back())}),i(x,{label:"Actualizar",icon:"pi pi-check",class:"p-button-success",loading:v.loading,onClick:I},null,8,["loading"])])])])])]),i(S)],64)}}};export{fl as default};
