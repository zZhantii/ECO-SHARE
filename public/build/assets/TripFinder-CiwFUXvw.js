import{J as P,l,q as N,b as i,h as j,j as o,w as m,f as r,N as q,z as F,o as c,d as p,n as v,t as g}from"./app-pebjqkCD.js";import{c as h,b as M,d as S}from"./index.esm-C_1aiQ0x.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"col-none-12 col-md-9 d-block d-md-flex flex-row justify-content-around align-items-center gap-4 p-none-4 p-1 m-1"},A={key:0,class:"p-error"},O={key:0,class:"p-error"},R={key:0,class:"p-error"},$={key:0,class:"p-error"},J={__name:"TripFinder",setup(U){const x=h().shape({origin:h().required("El origen es obligatorio"),destination:h().required("El destino es obligatorio"),date:S().required("La fecha es obligatoria"),passengers:M().required("El número de pasajeros es obligatorio").min(1,"Mínimo 1 pasajero")}),k=F(),B=P(),e=l({}),_=l(null),f=l(null),d=l(null),u=l(null),w=l({}),D=l(new Date),T=async()=>{var b,s;try{await x.validate({origin:(b=f.value)==null?void 0:b.getPlace(),destination:(s=_.value)==null?void 0:s.getPlace(),date:d.value,passengers:u.value},{abortEarly:!1}),e.value={};const t=new Date(d.value);t.setMinutes(t.getMinutes()-t.getTimezoneOffset());const a=t.toISOString().split("T")[0];w.value={origin:f.value.getPlace(),destination:_.value.getPlace(),date:a,passengers:u.value},k.push({name:"TripsIndex",query:{data:JSON.stringify(w.value)}})}catch(t){e.value=t.inner.reduce((a,n)=>(a[n.path]=n.message,a),{}),B.add({severity:"error",summary:"Error de validación",detail:"Por favor, complete todos los campos correctamente",life:3e3})}};return N(()=>{f.value=new google.maps.places.Autocomplete(document.getElementById("origin"),{componentRestrictions:{country:"es"},fields:["address_components","geometry","icon","name"]}),_.value=new google.maps.places.Autocomplete(document.getElementById("destination"),{componentRestrictions:{country:"es"},fields:["address_components","geometry","icon","name"]})}),(b,s)=>{const t=r("InputIcon"),a=r("InputText"),n=r("IconField"),V=r("DatePicker"),E=r("InputNumber"),I=r("Button");return c(),i("form",{onSubmit:q(T,["prevent"]),id:"trip-finder",class:"d-block d-md-flex justify-content-between"},[j("div",z,[o(n,{class:"col-none-11 col-md-3 ms-none-0 m-1 p-0"},{default:m(()=>[o(t,{class:"ms-1 pi pi-circle"}),o(a,{type:"text",id:"origin",placeholder:"De",class:v(["rm-border w-100",{"p-invalid":e.value.origin}])},null,8,["class"]),e.value.origin?(c(),i("small",A,g(e.value.origin),1)):p("",!0)]),_:1}),o(n,{class:"col-none-11 col-md-3 p-0 m-1"},{default:m(()=>[o(t,{class:"ms-1 pi pi-circle"}),o(a,{type:"text",placeholder:"A",id:"destination",class:v(["rm-border w-100",{"p-invalid":e.value.destination}])},null,8,["class"]),e.value.destination?(c(),i("small",O,g(e.value.destination),1)):p("",!0)]),_:1}),o(n,{class:"col-none-11 col-md-3 p-0 m-1"},{default:m(()=>[o(V,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=y=>d.value=y),"min-date":D.value,class:v(["rm-border w-100",{"p-invalid":e.value.date}]),placeholder:"Fecha",showIcon:"",iconDisplay:"input"},null,8,["modelValue","min-date","class"]),e.value.date?(c(),i("small",R,g(e.value.date),1)):p("",!0)]),_:1}),o(n,{class:"col-none-11 col-md-3 p-0 m-1"},{default:m(()=>[o(E,{class:v(["rm-border w-100",{"p-invalid":e.value.passengers}]),modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=y=>u.value=y),inputId:"minmax-buttons",showButtons:"",placeholder:"Pasajeros",min:0,max:4,fluid:""},null,8,["modelValue","class"]),e.value.passengers?(c(),i("small",$,g(e.value.passengers),1)):p("",!0)]),_:1})]),o(I,{label:"Buscar",type:"submit",class:"col-md-2 d-none d-md-block btn-trip-finder w-none-100 w-md-auto h-100 p-4"}),o(I,{label:"Buscar",type:"submit",class:"col-none-2 d-block d-md-none btn-trip-finder-phone w-100 p-3"})],32)}}},K=C(J,[["__scopeId","data-v-fe4304aa"]]);export{K as T};
