import{l as c,Q as n,P as g}from"./app-pebjqkCD.js";import{s as m,c as E,b as d}from"./index.esm-C_1aiQ0x.js";import{e as x}from"./yup-locales.esm-DRsOkZ6u.js";function A(){const u=c({user_id:0,trip_id:0,rate:null}),v=c([]),t=c(!1),s=g("$swal");m(x);const l=c({}),f=E().shape({user_id:d().required("El usuario es requerido").positive("El ID del usuario debe ser positivo").integer("El ID del usuario debe ser un número entero"),trip_id:d().required("El viaje es requerido").positive("El ID del viaje debe ser positivo").integer("El ID del viaje debe ser un número entero"),rate:d().required("La valoración es requerida").min(1,"La valoración debe ser entre 1 y 5").max(5,"La valoración debe ser entre 1 y 5").integer("La valoración debe ser un número entero")});return{getRates:async()=>{t.value||(t.value=!0,l.value={},n.get("/api/rates/").then(r=>{console.log("Respuesta API mostrar valoraciones: ",r.data.data),v.value=r.data.data}).catch(()=>{s({icon:"error",title:"Error",text:"Error al cargar las valoraciones"})}).finally(()=>t.value=!1))},createRate:async r=>{t.value||(t.value=!0,l.value={},n.post("/api/rates/",r.value).then(e=>{console.log("Respuesta API crear valoración: ",e.data.message),s({icon:"success",title:"Éxito",text:"Valoración creada correctamente"})}).catch(e=>{var a,o,i;((a=e.response)==null?void 0:a.status)===422?s({icon:"error",title:"Error",text:e.response.data.message}):((o=e.response)==null?void 0:o.status)===404?s({icon:"error",title:"Error",text:e.response.data.message}):((i=e.response)==null?void 0:i.status)===500&&s({icon:"error",title:"Error",text:e.response.data.message})}).finally(()=>t.value=!1))},getRateWithId:async(r,e)=>{t.value||(t.value=!0,l.value={},await n.get("/api/rates/"+r+"/"+e).then(a=>{console.log("Respuesta API obtener valoración: ",a.data.data),u.value=a.data.data}).catch(a=>{var o,i,p;((o=a.response)==null?void 0:o.status)===404?s({icon:"error",title:"Error",text:a.response.data.message}):((i=a.response)==null?void 0:i.status)===422?s({icon:"error",title:"Error",text:a.response.data.message}):((p=a.response)==null?void 0:p.status)===500&&s({icon:"error",title:"Error",text:a.response.data.message}),console.error("Error:",a)}).finally(()=>t.value=!1))},getRateWithId2:async r=>{t.value||(t.value=!0,l.value={},await n.get("/api/rates/"+r).then(e=>{console.log("Respuesta API obtener valoración: ",e.data.data),u.value=e.data.data}).catch(e=>{var a,o,i;((a=e.response)==null?void 0:a.status)===404?s({icon:"error",title:"Error",text:e.response.data.message}):((o=e.response)==null?void 0:o.status)===422?s({icon:"error",title:"Error",text:e.response.data.message}):((i=e.response)==null?void 0:i.status)===500&&s({icon:"error",title:"Error",text:e.response.data.message}),console.error("Error:",e)}).finally(()=>t.value=!1))},updateRate:async r=>{t.value||(t.value=!0,l.value={},n.put("/api/rates/"+r.value.pivot.user_id+"/"+r.value.pivot.trip_id,r.value.pivot).then(e=>{console.log("Respuesta API actualizar: ",e.data.message),s({icon:"success",title:"Éxito",text:"Valoración actualizada correctamente"})}).catch(e=>{var a;((a=e.response)==null?void 0:a.status)===500&&s({icon:"error",title:"Error",text:"Error al actualizar la valoración"})}).finally(()=>t.value=!1))},deleteRate:async r=>{t.value||(t.value=!0,l.value={},n.delete("/api/rates/"+r.user_id+"/"+r.trip_id).then(e=>{console.log("Respuesta API eliminar: ",e.data.message),s({icon:"success",title:"Éxito",text:"Valoración eliminada correctamente"})}).catch(e=>{var a;((a=e.response)==null?void 0:a.status)===404?s({icon:"error",title:"Error",text:"Valoración no encontrada"}):s({icon:"error",title:"Error",text:"Error al eliminar la valoración"}),console.error("Error:",e)}).finally(()=>t.value=!1))},rateList:v,rate:u,rateSchema:f,isLoading:t,validationErrors:l}}export{A as u};
