import{q as E,l as L,b as s,h as t,j as d,d as u,n as m,v as l,f as _,F as n,i as c,z as N,C as j,o as i,t as p}from"./app-pebjqkCD.js";import{u as A}from"./trips-BVbkd_tG.js";import{u as P}from"./users-BKl8x4eE.js";import{u as R}from"./vehicles-hQAbVoZ-.js";import"./yup-locales.esm-DRsOkZ6u.js";import"./index.esm-C_1aiQ0x.js";const z={class:"surface-ground px-4 py-5 md:px-6 lg:px-8"},H={class:"grid"},K={class:"col-12 md:col-8 md:col-offset-2"},q={class:"surface-card p-4 shadow-2 rounded-4"},G={class:"grid"},M={class:"col-12 md:col-6 mb-4"},$={key:0,class:"p-error block mt-1"},J={class:"col-12 md:col-6 mb-4"},O={key:0,class:"p-error block mt-1"},Q={class:"col-12 md:col-6 mb-4"},W={key:0,class:"p-error block mt-1"},X={class:"col-12 md:col-6 mb-4"},Y={key:0,class:"p-error block mt-1"},Z={class:"col-12 md:col-6 mb-4"},ee={class:"p-inputgroup"},le={key:0,class:"p-error block mt-1"},oe={class:"col-12 md:col-6 mb-4"},te={class:"p-inputgroup"},ae={key:0,class:"p-error block mt-1"},se={class:"col-12 md:col-6 mb-4"},ie={class:"col-12 md:col-6 mb-4"},re={class:"flex justify-content-end"},_e={__name:"Create",setup(de){j();const f=N(),{createTrip:x,trip:r,validationErrors:a,TripSchema:w}=A(),{getUsers:F,users:U}=P(),{getVehiclesAdmin:g,vehiclesList:S,getVehicle:C,vehicle:T}=R();E(async()=>{await F(),await g()});const h=L(null),I=async v=>{await C(v),h.value=T.value.pax_number},B=async()=>{try{await w.validate(r.value,{abortEarly:!1}).then(()=>{x(r)}),f.back()}catch(v){a.value={},v.inner.forEach(e=>{a.value[e.path]||(a.value[e.path]=[]),a.value[e.path].push(e.message)})}};return(v,e)=>{const y=_("Select"),b=_("DatePicker"),k=_("InputNumber"),V=_("Button"),D=_("Toast");return i(),s(n,null,[t("div",z,[t("div",H,[t("div",K,[t("div",q,[e[17]||(e[17]=t("div",{class:"text-center mb-5"},[t("h2",{class:"text-3xl font-medium text-900 mb-3"},"Crear Viaje"),t("span",{class:"text-600 font-medium"},"Por favor, complete los datos del viaje")],-1)),t("div",G,[t("div",M,[e[9]||(e[9]=t("label",{for:"user_id",class:"block text-900 font-medium mb-2"},"Usuario",-1)),d(y,{modelValue:l(r).user_id,"onUpdate:modelValue":e[0]||(e[0]=o=>l(r).user_id=o),options:l(U).data,filter:"",optionLabel:"name",optionValue:"id",dataKey:"id",class:m(["w-full",{"p-invalid":l(a).user_id}]),placeholder:"Seleccionar Usuario"},null,8,["modelValue","options","class"]),l(a).user_id?(i(),s("small",$,[(i(!0),s(n,null,c(l(a).user_id,o=>(i(),s("div",{key:o},p(o),1))),128))])):u("",!0)]),t("div",J,[e[10]||(e[10]=t("label",{for:"vehicle_id",class:"block text-900 font-medium mb-2"},"Vehículo",-1)),d(y,{modelValue:l(r).vehicle_id,"onUpdate:modelValue":[e[1]||(e[1]=o=>l(r).vehicle_id=o),I],options:l(S),filter:"",optionLabel:"brand",optionValue:"id",dataKey:"id",class:m(["w-full",{"p-invalid":l(a).vehicle_id}]),placeholder:"Seleccionar Vehículo"},null,8,["modelValue","options","class"]),l(a).vehicle_id?(i(),s("small",O,[(i(!0),s(n,null,c(l(a).vehicle_id,o=>(i(),s("div",{key:o},p(o),1))),128))])):u("",!0)]),t("div",Q,[e[11]||(e[11]=t("label",{for:"departure_time",class:"block text-900 font-medium mb-2"},"Hora de Salida",-1)),d(b,{modelValue:l(r).departure_time,"onUpdate:modelValue":e[2]||(e[2]=o=>l(r).departure_time=o),showTime:"",hourFormat:"24",class:m(["w-full",{"p-invalid":l(a).departure_time}]),showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l(a).departure_time?(i(),s("small",W,[(i(!0),s(n,null,c(l(a).departure_time,o=>(i(),s("div",{key:o},p(o),1))),128))])):u("",!0)]),t("div",X,[e[12]||(e[12]=t("label",{for:"arrival_time",class:"block text-900 font-medium mb-2"},"Hora de Llegada",-1)),d(b,{modelValue:l(r).arrival_time,"onUpdate:modelValue":e[3]||(e[3]=o=>l(r).arrival_time=o),showTime:"",hourFormat:"24",class:m(["w-full",{"p-invalid":l(a).arrival_time}]),showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l(a).arrival_time?(i(),s("small",Y,[(i(!0),s(n,null,c(l(a).arrival_time,o=>(i(),s("div",{key:o},p(o),1))),128))])):u("",!0)]),t("div",Z,[e[13]||(e[13]=t("label",{for:"available_seats",class:"block text-900 font-medium mb-2"},"Asientos Disponibles",-1)),t("div",ee,[d(k,{modelValue:l(r).available_seats,"onUpdate:modelValue":e[4]||(e[4]=o=>l(r).available_seats=o),id:"available_seats",min:0,max:h.value,showButtons:"",class:m(["w-full",{"p-invalid":l(a).available_seats}])},null,8,["modelValue","max","class"])]),l(a).available_seats?(i(),s("small",le,[(i(!0),s(n,null,c(l(a).available_seats,o=>(i(),s("div",{key:o},p(o),1))),128))])):u("",!0)]),t("div",oe,[e[14]||(e[14]=t("label",{for:"price",class:"block text-900 font-medium mb-2"},"Precio",-1)),t("div",te,[d(k,{modelValue:l(r).price,"onUpdate:modelValue":e[5]||(e[5]=o=>l(r).price=o),id:"price",minFractionDigits:2,maxFractionDigits:2,placeholder:"0.00",class:m(["w-full",{"p-invalid":l(a).price}]),mode:"currency",currency:"EUR",locale:"es-ES"},null,8,["modelValue","class"])]),l(a).price?(i(),s("small",ae,[(i(!0),s(n,null,c(l(a).price,o=>(i(),s("div",{key:o},p(o),1))),128))])):u("",!0)]),t("div",se,[e[15]||(e[15]=t("label",{for:"drive_start",class:"block text-900 font-medium mb-2"},"Inicio de Conducción",-1)),d(b,{modelValue:l(r).drive_start,"onUpdate:modelValue":e[6]||(e[6]=o=>l(r).drive_start=o),showTime:"",hourFormat:"24",class:"w-full",showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue"])]),t("div",ie,[e[16]||(e[16]=t("label",{for:"drive_end",class:"block text-900 font-medium mb-2"},"Fin de Conducción",-1)),d(b,{modelValue:l(r).drive_end,"onUpdate:modelValue":e[7]||(e[7]=o=>l(r).drive_end=o),showTime:"",hourFormat:"24",class:"w-full",showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue"])])]),t("div",re,[d(V,{label:"Cancelar",class:"p-button-text mr-2",onClick:e[8]||(e[8]=o=>l(f).back())}),d(V,{label:"Guardar",icon:"pi pi-check",loading:v.loading,onClick:B},null,8,["loading"])])])])])]),d(D)],64)}}};export{_e as default};
