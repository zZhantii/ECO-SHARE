import{J as D,q as L,C as N,l as j,b as a,h as o,j as d,d as u,n as c,v as l,f as _,F as n,i as m,z as A,o as i,t as p}from"./app-pebjqkCD.js";import{s as I}from"./index.esm-C_1aiQ0x.js";import{e as z}from"./yup-locales.esm-DRsOkZ6u.js";import{u as P}from"./trips-BVbkd_tG.js";import{u as R}from"./users-BKl8x4eE.js";import{u as q}from"./vehicles-hQAbVoZ-.js";const H={class:"surface-ground px-4 py-5 md:px-6 lg:px-8"},K={class:"grid"},M={class:"col-12 md:col-8 md:col-offset-2"},J={class:"surface-card p-4 shadow-2 rounded-4"},$={class:"grid"},G={class:"col-12 md:col-6 mb-4"},O={key:0,class:"p-error block mt-1"},Q={class:"col-12 md:col-6 mb-4"},W={key:0,class:"p-error block mt-1"},X={class:"col-12 md:col-6 mb-4"},Y={key:0,class:"p-error block mt-1"},Z={class:"col-12 md:col-6 mb-4"},ee={key:0,class:"p-error block mt-1"},le={class:"col-12 md:col-6 mb-4"},te={class:"p-inputgroup"},oe={key:0,class:"p-error block mt-1"},se={class:"col-12 md:col-6 mb-4"},ae={class:"p-inputgroup"},ie={key:0,class:"p-error block mt-1"},re={class:"col-12"},de={class:"flex justify-content-end"},be={__name:"Edit",setup(ne){I(z);const V=N(),b=A();D();const{updateTripAdmin:x,getTrip:w,trip:r,TripSchema:g,validationErrors:s}=P(),{getUsers:U,users:S}=R(),{getVehiclesAdmin:T,vehiclesList:E}=q();L(async()=>{await w(V.params.id),await U(),await T()});const F=j(!1),B=async()=>{try{await g.validate(r.value,{abortEarly:!1}).then(()=>{x(r)}),b.back()}catch(v){v.inner&&(s.value={},v.inner.forEach(e=>{s.value[e.path]||(s.value[e.path]=[]),s.value[e.path].push(e.message)}))}};return(v,e)=>{const f=_("Select"),h=_("DatePicker"),k=_("InputNumber"),y=_("Button"),C=_("Toast");return i(),a(n,null,[o("div",H,[o("div",K,[o("div",M,[o("div",J,[e[13]||(e[13]=o("div",{class:"text-center mb-5"},[o("h2",{class:"text-3xl font-medium text-900 mb-3"},"Editar Viaje"),o("span",{class:"text-600 font-medium"},"Modifique los datos del viaje")],-1)),o("div",$,[o("div",G,[e[7]||(e[7]=o("label",{for:"user_id",class:"block text-900 font-medium mb-2"},"Usuario",-1)),d(f,{modelValue:l(r).user_id,"onUpdate:modelValue":e[0]||(e[0]=t=>l(r).user_id=t),options:l(S).data,filter:"",optionLabel:"name",optionValue:"id",dataKey:"id",class:c(["w-full",{"p-invalid":l(s).user_id}]),placeholder:"Seleccionar Usuario"},null,8,["modelValue","options","class"]),l(s).user_id?(i(),a("small",O,[(i(!0),a(n,null,m(l(s).user_id,t=>(i(),a("div",{key:t},p(t),1))),128))])):u("",!0)]),o("div",Q,[e[8]||(e[8]=o("label",{for:"vehicle_id",class:"block text-900 font-medium mb-2"},"Vehículo",-1)),d(f,{modelValue:l(r).vehicle_id,"onUpdate:modelValue":e[1]||(e[1]=t=>l(r).vehicle_id=t),options:l(E),filter:"",optionLabel:"brand",optionValue:"id",dataKey:"id",class:c(["w-full",{"p-invalid":l(s).vehicle_id}]),placeholder:"Seleccionar Vehículo"},null,8,["modelValue","options","class"]),l(s).vehicle_id?(i(),a("small",W,[(i(!0),a(n,null,m(l(s).vehicle_id,t=>(i(),a("div",{key:t},p(t),1))),128))])):u("",!0)]),o("div",X,[e[9]||(e[9]=o("label",{for:"departure_time",class:"block text-900 font-medium mb-2"},"Hora de Salida",-1)),d(h,{modelValue:l(r).departure_time,"onUpdate:modelValue":e[2]||(e[2]=t=>l(r).departure_time=t),showTime:"",hourFormat:"24",class:c(["w-full",{"p-invalid":l(s).departure_time}]),showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l(s).departure_time?(i(),a("small",Y,[(i(!0),a(n,null,m(l(s).departure_time,t=>(i(),a("div",{key:t},p(t),1))),128))])):u("",!0)]),o("div",Z,[e[10]||(e[10]=o("label",{for:"arrival_time",class:"block text-900 font-medium mb-2"},"Hora de Llegada",-1)),d(h,{modelValue:l(r).arrival_time,"onUpdate:modelValue":e[3]||(e[3]=t=>l(r).arrival_time=t),showTime:"",hourFormat:"24",class:c(["w-full",{"p-invalid":l(s).arrival_time}]),showIcon:!0,placeholder:"Seleccionar fecha y hora",dateFormat:"dd/mm/yy"},null,8,["modelValue","class"]),l(s).arrival_time?(i(),a("small",ee,[(i(!0),a(n,null,m(l(s).arrival_time,t=>(i(),a("div",{key:t},p(t),1))),128))])):u("",!0)]),o("div",le,[e[11]||(e[11]=o("label",{for:"available_seats",class:"block text-900 font-medium mb-2"},"Asientos Disponibles",-1)),o("div",te,[d(k,{modelValue:l(r).available_seats,"onUpdate:modelValue":e[4]||(e[4]=t=>l(r).available_seats=t),id:"available_seats",showButtons:"",class:c(["w-full",{"p-invalid":l(s).available_seats}])},null,8,["modelValue","class"])]),l(s).available_seats?(i(),a("small",oe,[(i(!0),a(n,null,m(l(s).available_seats,t=>(i(),a("div",{key:t},p(t),1))),128))])):u("",!0)]),o("div",se,[e[12]||(e[12]=o("label",{for:"price",class:"block text-900 font-medium mb-2"},"Precio",-1)),o("div",ae,[d(k,{modelValue:l(r).price,"onUpdate:modelValue":e[5]||(e[5]=t=>l(r).price=t),id:"price",minFractionDigits:2,maxFractionDigits:2,mode:"currency",currency:"EUR",locale:"es-ES",showButtons:"",class:c(["w-full",{"p-invalid":l(s).price}])},null,8,["modelValue","class"])]),l(s).price?(i(),a("small",ie,[(i(!0),a(n,null,m(l(s).price,t=>(i(),a("div",{key:t},p(t),1))),128))])):u("",!0)]),o("div",re,[o("div",de,[d(y,{label:"Cancelar",class:"p-button-text mr-2",onClick:e[6]||(e[6]=t=>l(b).back())}),d(y,{label:"Actualizar",icon:"pi pi-check",class:"p-button-success",loading:F.value,onClick:B},null,8,["loading"])])])])])])])]),d(C)],64)}}};export{be as default};
