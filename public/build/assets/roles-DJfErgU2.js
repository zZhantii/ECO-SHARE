import{l as n,z as w,P as _}from"./app-pebjqkCD.js";function C(){const c=n([]),u=n({name:""}),d=n([]),p=n([]),i=w(),o=n({}),a=n(!1),r=_("$swal"),f=async(e=1,s="",t="",l="",y="created_at",R="desc")=>{axios.get("/api/roles?page="+e+"&search_id="+s+"&search_title="+t+"&search_global="+l+"&order_column="+y+"&order_direction="+R).then(x=>{c.value=x.data})},h=async e=>{axios.get("/api/roles/"+e).then(s=>{u.value=s.data.data})},m=async e=>{axios.get("/api/role-permissions/"+e).then(s=>{p.value=s.data.data})},g=async e=>{a.value||(a.value=!0,o.value={},axios.post("/api/roles",e).then(s=>{i.push({name:"roles.index"}),r({icon:"success",title:"Role saved successfully"})}).catch(s=>{var t;(t=s.response)!=null&&t.data&&(o.value=s.response.data.errors)}).finally(()=>a.value=!1))},v=async e=>{a.value||(a.value=!0,o.value={},axios.put("/api/roles/"+e.id,e).then(s=>{i.push({name:"roles.index"}),r({icon:"success",title:"Role updated successfully"})}).catch(s=>{var t;(t=s.response)!=null&&t.data&&(o.value=s.response.data.errors)}).finally(()=>a.value=!1))};return{roles:c,role:u,roleList:d,getRoleList:async()=>{axios.get("/api/role-list").then(e=>{d.value=e.data.data})},getRoles:f,rolePermissionList:p,getRolePermissions:m,getRole:h,storeRole:g,updateRole:v,updateRolePermissions:async(e,s)=>{a.value||(a.value=!0,o.value={},axios.put("/api/role-permissions",{permissions:JSON.stringify(s),role_id:e.id}).catch(t=>{var l;(l=t.response)!=null&&l.data&&(o.value=t.response.data.errors)}).finally(()=>{a.value=!1,v(e)}))},deleteRole:async e=>{r({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&axios.delete("/api/roles/"+e).then(t=>{f(),i.push({name:"roles.index"}),r({icon:"success",title:"Role deleted successfully"})}).catch(t=>{r({icon:"error",title:"Something went wrong"})})})},validationErrors:o,isLoading:a}}export{C as u};
